.game-shell {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  padding: 18px;
  gap: 16px;
}

.hud {
  display: flex;
  flex-direction: column;
  gap: 12px;
  background: rgba(15, 18, 28, 0.9);
  border: 1px solid rgba(120, 135, 180, 0.2);
  border-radius: 16px;
  padding: 16px 18px;
  box-shadow: 0 10px 24px rgba(4, 6, 12, 0.4);
}

.hud__title {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 12px;
}

.hud__brand {
  font-size: 18px;
  font-weight: 700;
  letter-spacing: 0.04em;
}

.hud__subtitle {
  font-size: 14px;
  color: #9fb0d1;
}

.hud__stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 8px;
}

.hud__training {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  background: rgba(18, 22, 36, 0.75);
  border-radius: 12px;
  padding: 12px;
  border: 1px solid rgba(92, 104, 142, 0.25);
  flex-wrap: wrap;
}

.hud__training-title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 600;
}

.hud__training-step {
  font-size: 13px;
  color: #c8d4f0;
}

.hud__training-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.stat {
  background: rgba(25, 28, 44, 0.7);
  padding: 8px 10px;
  border-radius: 10px;
  font-size: 13px;
  color: #dfe6f6;
}

.game-grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 14px;
  flex: 1;
  align-content: start;
}

.panel {
  background: rgba(11, 13, 22, 0.9);
  border-radius: 18px;
  border: 1px solid rgba(92, 104, 142, 0.3);
  padding: 14px 16px;
  display: flex;
  flex-direction: column;
  gap: 14px;
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02);
}

.panel__header h2 {
  font-size: 18px;
}

.panel__header span {
  color: #9fb0d1;
  font-size: 13px;
}

.tab-bar {
  grid-column: span 12;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  background: rgba(12, 15, 26, 0.9);
  padding: 8px;
  border-radius: 14px;
  border: 1px solid rgba(92, 104, 142, 0.3);
}

.tab-bar__button {
  background: rgba(25, 30, 46, 0.9);
  color: #d4e0ff;
  border-radius: 10px;
  padding: 8px 12px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease, transform 0.2s ease;
}

.tab-bar__button--active {
  background: linear-gradient(135deg, #b21f42, #e34d6d);
  color: #fff;
}

.tab-bar__button--locked {
  opacity: 0.6;
  cursor: not-allowed;
}

.tab-bar__button:hover:not(.tab-bar__button--active) {
  transform: translateY(-1px);
}

.toast-stack {
  position: fixed;
  top: 18px;
  right: 18px;
  display: grid;
  gap: 8px;
  z-index: 50;
  max-width: 280px;
}

.toast {
  background: rgba(15, 18, 28, 0.95);
  border-radius: 12px;
  padding: 10px 12px;
  font-size: 13px;
  border: 1px solid rgba(92, 104, 142, 0.4);
  color: #dfe6f6;
  box-shadow: 0 6px 18px rgba(4, 6, 12, 0.35);
}

.toast--warning {
  border-color: rgba(255, 178, 110, 0.6);
  color: #ffd7b1;
}

.toast--success {
  border-color: rgba(118, 232, 170, 0.6);
  color: #c6ffe3;
}

.toast--info {
  border-color: rgba(145, 181, 255, 0.6);
  color: #cbd9ff;
}

.panel--story {
  grid-column: span 12;
}

.panel--map {
  grid-column: span 7;
}

.panel--details {
  grid-column: span 5;
}

.panel--modules {
  grid-column: span 7;
}

.panel--combat {
  grid-column: span 12;
}

.panel--doctrine {
  grid-column: span 5;
}

.panel--save {
  grid-column: span 6;
}

.panel--faq {
  grid-column: span 6;
}

.panel--training {
  grid-column: span 12;
}

.panel--tutorial {
  grid-column: span 12;
}

.panel--research {
  grid-column: span 7;
}

.panel--achievements {
  grid-column: span 12;
}

.panel--log {
  grid-column: span 7;
}

.panel--notifications {
  grid-column: span 5;
}

.level-progress {
  display: grid;
  gap: 8px;
  background: rgba(18, 22, 36, 0.75);
  padding: 12px;
  border-radius: 12px;
  font-size: 13px;
  color: #cdd8f3;
}

.level-progress__title {
  font-weight: 600;
}

.level-progress__meta {
  color: #9fb0d1;
}

.action-group {
  display: grid;
  gap: 10px;
}

.action-group h3 {
  font-size: 15px;
  color: #d7e1f7;
}

.actions {
  display: grid;
  gap: 10px;
}

.actions button,
.details__actions button,
.combat__actions button,
.module-card button,
.doctrine-card button,
.research-card button,
.harvest-mode__button,
.save-actions button {
  background: linear-gradient(135deg, #b21f42, #e34d6d);
  color: #fff;
  padding: 9px 12px;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  display: grid;
  gap: 6px;
  text-align: left;
}

.actions button:disabled,
.details__actions button:disabled,
.combat__actions button:disabled,
.module-card button:disabled,
.doctrine-card button:disabled,
.research-card button:disabled,
.harvest-mode__button:disabled,
.save-actions button:disabled {
  background: rgba(69, 76, 95, 0.7);
  cursor: not-allowed;
  box-shadow: none;
}

.actions button:hover:not(:disabled),
.details__actions button:hover:not(:disabled),
.combat__actions button:hover:not(:disabled),
.module-card button:hover:not(:disabled),
.doctrine-card button:hover:not(:disabled),
.research-card button:hover:not(:disabled),
.harvest-mode__button:hover:not(:disabled),
.save-actions button:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(226, 70, 103, 0.35);
}

.rates {
  font-size: 13px;
  color: #b6c2de;
  display: grid;
  gap: 6px;
}

.action-cost {
  font-size: 12px;
  color: #f4c6d1;
}

.action-insight {
  background: rgba(17, 22, 36, 0.8);
  border-radius: 12px;
  padding: 12px;
  border: 1px solid rgba(92, 104, 142, 0.2);
  display: grid;
  gap: 6px;
  font-size: 13px;
}

.action-insight__title {
  font-weight: 600;
  color: #f1c2ce;
}

.action-insight__effect {
  color: #a7c1ff;
}

.map-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 12px;
}

.map-node {
  background: rgba(22, 27, 45, 0.9);
  border: 1px solid rgba(92, 104, 142, 0.4);
  padding: 12px;
  border-radius: 14px;
  text-align: left;
  color: #e5ebf7;
  cursor: pointer;
  transition: border-color 0.2s ease, transform 0.2s ease;
}

.map-node--active {
  border-color: #ff7895;
  box-shadow: 0 0 0 2px rgba(255, 120, 149, 0.2);
}

.map-node--cleared {
  background: rgba(17, 35, 32, 0.9);
  border-color: rgba(86, 160, 128, 0.5);
}

.map-node--locked {
  opacity: 0.5;
  cursor: not-allowed;
}

.map-node:hover:not(.map-node--locked) {
  transform: translateY(-2px);
}

.map-node__title {
  font-weight: 600;
  margin-bottom: 6px;
}

.map-node__meta {
  font-size: 12px;
  color: #a9b7d7;
}

.details {
  display: grid;
  gap: 12px;
}

.details__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

.details__reward ul {
  display: grid;
  gap: 6px;
  font-size: 13px;
  color: #ccd6f3;
}

.tag {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 600;
}

.tag--success {
  background: rgba(36, 146, 95, 0.2);
  color: #7ef0b4;
}

.tag--warning {
  background: rgba(215, 126, 68, 0.2);
  color: #ffc392;
}

.module-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
}

.module-card {
  background: rgba(20, 25, 42, 0.8);
  border-radius: 14px;
  padding: 12px;
  border: 1px solid rgba(85, 97, 134, 0.4);
  display: grid;
  gap: 12px;
}

.module-card__header {
  display: flex;
  justify-content: space-between;
  gap: 10px;
}

.module-card__cost {
  display: flex;
  gap: 10px;
  font-size: 13px;
  color: #c1cce7;
}

.module-card__actions,
.doctrine-card__actions {
  display: grid;
  gap: 8px;
}

.module-card__upgrade,
.doctrine-card__upgrade,
.doctrine-card__activate {
  background: rgba(25, 30, 46, 0.9);
}

.module-card__requires {
  font-size: 12px;
  color: #9fb0d1;
}

.harvest-mode {
  margin-top: 12px;
  display: grid;
  gap: 10px;
  font-size: 13px;
  color: #cdd8f3;
}

.harvest-mode__grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 10px;
}

.harvest-mode__button {
  background: rgba(25, 30, 46, 0.9);
  border-radius: 12px;
  padding: 10px 12px;
  display: grid;
  gap: 6px;
  text-align: left;
}

.harvest-mode__button--active {
  background: linear-gradient(135deg, #2f994c, #3fd37c);
  color: #052011;
}

.harvest-mode__meta {
  font-size: 12px;
  color: #f4c6d1;
}

.module-card__meta,
.module-card__effects {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.doctrine-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
}

.doctrine-card {
  background: rgba(20, 25, 42, 0.8);
  border-radius: 14px;
  padding: 12px;
  border: 1px solid rgba(85, 97, 134, 0.4);
  display: grid;
  gap: 10px;
}

.doctrine-card__header {
  display: flex;
  justify-content: space-between;
  gap: 10px;
}

.pill {
  background: rgba(35, 42, 64, 0.8);
  border-radius: 999px;
  padding: 4px 10px;
  font-size: 12px;
  color: #c4d4f5;
}

.pill--dark {
  background: rgba(24, 28, 44, 0.9);
  color: #f0c8d4;
}

.combat {
  display: grid;
  gap: 12px;
}

.combat__enemy,
.combat__player {
  display: grid;
  gap: 8px;
}

.bar {
  width: 100%;
  height: 10px;
  border-radius: 999px;
  background: rgba(27, 34, 52, 0.9);
  overflow: hidden;
}

.bar__fill {
  height: 100%;
  background: linear-gradient(90deg, #6dd5ed, #2193b0);
  transition: width 0.3s ease;
}

.bar__fill--danger {
  background: linear-gradient(90deg, #ff416c, #ff4b2b);
}

.combat__actions {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 10px;
}

.combat__intent {
  font-size: 12px;
  color: #ffb7c6;
}

.combat__buffs {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  font-size: 12px;
  color: #cfe2ff;
}

.combat--idle {
  font-size: 14px;
  color: #b2bfdc;
}

.log {
  display: grid;
  gap: 8px;
  max-height: 180px;
  overflow: auto;
  padding-right: 6px;
}

.notification-list {
  display: grid;
  gap: 8px;
}

.notification-item {
  background: rgba(19, 24, 38, 0.8);
  border-radius: 10px;
  padding: 10px 12px;
  font-size: 13px;
  border: 1px solid rgba(92, 104, 142, 0.3);
}

.notification-item--warning {
  border-color: rgba(255, 178, 110, 0.6);
  color: #ffd7b1;
}

.notification-item--success {
  border-color: rgba(118, 232, 170, 0.6);
  color: #c6ffe3;
}

.notification-item--info {
  border-color: rgba(145, 181, 255, 0.6);
  color: #cbd9ff;
}

.notification-empty {
  color: #8fa1c5;
  font-size: 13px;
}

.save-box {
  display: grid;
  gap: 12px;
}

.save-box textarea {
  background: rgba(20, 24, 38, 0.8);
  border: 1px solid rgba(92, 104, 142, 0.4);
  color: #e1e9ff;
  border-radius: 12px;
  padding: 10px;
  resize: vertical;
}

.save-actions {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 10px;
}

.save-reset {
  background: linear-gradient(135deg, #2f394f, #4d5978);
}

.save-reset:hover:not(:disabled) {
  box-shadow: 0 6px 16px rgba(115, 136, 185, 0.35);
}

.save-status {
  font-size: 13px;
  color: #9fc2ff;
}

.faq {
  display: grid;
  gap: 12px;
  font-size: 13px;
  color: #d1dbf5;
}

.faq__item {
  background: rgba(18, 22, 36, 0.65);
  padding: 12px;
  border-radius: 12px;
  border: 1px solid rgba(92, 104, 142, 0.2);
  display: grid;
  gap: 6px;
}

.log li {
  display: grid;
  grid-template-columns: 70px 1fr;
  gap: 10px;
  font-size: 13px;
  color: #d7e1f7;
}

.log__time {
  color: #8fa1c5;
}

.footer {
  text-align: center;
  font-size: 14px;
  color: #9fb0d1;
}

.training {
  display: grid;
  gap: 12px;
  font-size: 13px;
  color: #d1dbf5;
}

.tutorial-card {
  display: grid;
  gap: 10px;
  background: rgba(18, 22, 36, 0.75);
  border-radius: 14px;
  padding: 12px;
  border: 1px solid rgba(92, 104, 142, 0.3);
}

.tutorial-card__meta {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.tutorial-card__title {
  font-size: 16px;
  color: #f5c7d5;
}

.tutorial-card__text {
  color: #cfd8f0;
}

.tutorial-card__hint {
  background: rgba(24, 28, 44, 0.9);
  border-radius: 10px;
  padding: 8px 10px;
  color: #a7c1ff;
  font-size: 13px;
}

.tutorial-card__locked {
  font-size: 12px;
  color: #ffb7c6;
}

.research-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
}

.research-card {
  background: rgba(20, 25, 42, 0.8);
  border-radius: 14px;
  padding: 12px;
  border: 1px solid rgba(85, 97, 134, 0.4);
  display: grid;
  gap: 10px;
}

.research-card__header {
  display: flex;
  justify-content: space-between;
  gap: 10px;
}

.achievement-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
}

.achievement-card {
  background: rgba(18, 22, 36, 0.8);
  border-radius: 14px;
  padding: 12px;
  border: 1px solid rgba(92, 104, 142, 0.3);
  display: grid;
  gap: 8px;
}

.achievement-card--unlocked {
  border-color: rgba(118, 232, 170, 0.6);
}

.achievement-card__header {
  display: flex;
  justify-content: space-between;
  gap: 10px;
}

.achievement-card__progress {
  display: grid;
  gap: 6px;
  font-size: 12px;
  color: #c4d4f5;
}

.training__toggle {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.training__button {
  background: rgba(25, 30, 46, 0.9);
  color: #d4e0ff;
  border-radius: 10px;
  padding: 8px 12px;
  font-weight: 600;
  cursor: pointer;
}

.training__button--active {
  background: linear-gradient(135deg, #2f994c, #3fd37c);
  color: #052011;
}

.training__steps {
  display: grid;
  gap: 10px;
}

.training__step {
  background: rgba(18, 22, 36, 0.65);
  border-radius: 12px;
  padding: 12px;
  border: 1px solid rgba(92, 104, 142, 0.2);
  display: grid;
  gap: 4px;
}

.training__step--active {
  border-color: rgba(255, 170, 195, 0.6);
  box-shadow: 0 0 0 1px rgba(255, 170, 195, 0.2);
}

.training__step--done {
  border-color: rgba(118, 232, 170, 0.5);
}

.training__title {
  font-weight: 600;
  color: #f5c7d5;
}

.training__note {
  color: #8fa1c5;
}

@media (max-width: 720px) {
  .toast-stack {
    left: 18px;
    right: 18px;
  }
  .tab-bar {
    position: sticky;
    top: 0;
    z-index: 10;
  }
}

.game-over {
  color: #ff9aa8;
  font-weight: 600;
}

@media (max-width: 1200px) {
  .panel--map,
  .panel--details,
  .panel--modules,
  .panel--combat,
  .panel--doctrine,
  .panel--research,
  .panel--save,
  .panel--faq,
  .panel--log,
  .panel--notifications,
  .panel--training,
  .panel--achievements,
  .panel--tutorial {
    grid-column: span 12;
  }
}
